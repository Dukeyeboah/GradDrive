{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/duke/Documents/GitHub/GradDrive/lib/firebase/config.ts"],"sourcesContent":["import { initializeApp, getApps, FirebaseApp } from \"firebase/app\"\nimport { getAuth, Auth } from \"firebase/auth\"\nimport { getStorage, FirebaseStorage } from \"firebase/storage\"\nimport { getFirestore, Firestore } from \"firebase/firestore\"\n\nconst firebaseConfig = {\n  apiKey: process.env.NEXT_PUBLIC_FIREBASE_API_KEY || \"AIzaSyANOxmLGz-PNCDTYKVUv_tomcFroqLVA8A\",\n  authDomain: process.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN || \"graddrive-e3695.firebaseapp.com\",\n  projectId: process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID || \"graddrive-e3695\",\n  storageBucket: process.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET || \"graddrive-e3695.firebasestorage.app\",\n  messagingSenderId: process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID || \"721935097812\",\n  appId: process.env.NEXT_PUBLIC_FIREBASE_APP_ID || \"1:721935097812:web:eece464983d41da455c041\",\n  measurementId: process.env.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID || \"G-FLDCT8LMJX\"\n}\n\n// Initialize Firebase\nlet app: FirebaseApp\nif (getApps().length === 0) {\n  app = initializeApp(firebaseConfig)\n} else {\n  app = getApps()[0]\n}\n\n// Initialize Firebase services\nexport const auth: Auth = getAuth(app)\nexport const storage: FirebaseStorage = getStorage(app)\nexport const db: Firestore = getFirestore(app)\n\nexport default app\n\n"],"names":[],"mappings":";;;;;;;;;;AAMU;AANV;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;;;;;AAEA,MAAM,iBAAiB;IACrB,QAAQ,iRAAO,CAAC,GAAG,CAAC,4BAA4B,IAAI;IACpD,YAAY,iRAAO,CAAC,GAAG,CAAC,gCAAgC,IAAI;IAC5D,WAAW,iRAAO,CAAC,GAAG,CAAC,+BAA+B,IAAI;IAC1D,eAAe,iRAAO,CAAC,GAAG,CAAC,mCAAmC,IAAI;IAClE,mBAAmB,iRAAO,CAAC,GAAG,CAAC,wCAAwC,IAAI;IAC3E,OAAO,iRAAO,CAAC,GAAG,CAAC,2BAA2B,IAAI;IAClD,eAAe,iRAAO,CAAC,GAAG,CAAC,mCAAmC,IAAI;AACpE;AAEA,sBAAsB;AACtB,IAAI;AACJ,IAAI,IAAA,kPAAO,IAAG,MAAM,KAAK,GAAG;IAC1B,MAAM,IAAA,wPAAa,EAAC;AACtB,OAAO;IACL,MAAM,IAAA,kPAAO,GAAE,CAAC,EAAE;AACpB;AAGO,MAAM,OAAa,IAAA,gRAAO,EAAC;AAC3B,MAAM,UAA2B,IAAA,0RAAU,EAAC;AAC5C,MAAM,KAAgB,IAAA,+RAAY,EAAC;uCAE3B"}},
    {"offset": {"line": 54, "column": 0}, "map": {"version":3,"sources":["file:///Users/duke/Documents/GitHub/GradDrive/lib/firebase/auth.ts"],"sourcesContent":["'use client';\n\nimport {\n  signInWithEmailAndPassword,\n  createUserWithEmailAndPassword,\n  signInWithPopup,\n  GoogleAuthProvider,\n  signOut,\n  User,\n  onAuthStateChanged,\n  updateProfile,\n} from 'firebase/auth';\nimport { auth } from './config';\nimport { doc, setDoc, getDoc, serverTimestamp } from 'firebase/firestore';\nimport { db } from './config';\n\nconst googleProvider = new GoogleAuthProvider();\n// Add additional scopes if needed\ngoogleProvider.addScope('profile');\ngoogleProvider.addScope('email');\n// Set custom parameters\ngoogleProvider.setCustomParameters({\n  prompt: 'select_account',\n});\n\nexport interface UserData {\n  uid: string;\n  email: string | null;\n  displayName: string | null;\n  photoURL: string | null;\n  role?: 'user' | 'admin' | 'super admin';\n  createdAt?: any;\n  updatedAt?: any;\n}\n\n/**\n * Sign in with email and password\n */\nexport async function signInEmailPassword(email: string, password: string) {\n  try {\n    const userCredential = await signInWithEmailAndPassword(\n      auth,\n      email,\n      password\n    );\n    return { user: userCredential.user, error: null };\n  } catch (error: any) {\n    return { user: null, error: error.message };\n  }\n}\n\n/**\n * Sign up with email and password\n */\nexport async function signUpEmailPassword(\n  email: string,\n  password: string,\n  displayName?: string,\n  role: 'user' | 'admin' | 'super admin' = 'user'\n) {\n  try {\n    const userCredential = await createUserWithEmailAndPassword(\n      auth,\n      email,\n      password\n    );\n\n    // Update profile with display name if provided\n    if (displayName && userCredential.user) {\n      await updateProfile(userCredential.user, { displayName });\n    }\n\n    // Create user document in Firestore\n    const userData: UserData = {\n      uid: userCredential.user.uid,\n      email: userCredential.user.email,\n      displayName: displayName || userCredential.user.displayName,\n      photoURL: userCredential.user.photoURL,\n      role: role,\n      createdAt: serverTimestamp(),\n      updatedAt: serverTimestamp(),\n    };\n\n    await setDoc(doc(db, 'users', userCredential.user.uid), userData);\n\n    return { user: userCredential.user, error: null };\n  } catch (error: any) {\n    return { user: null, error: error.message };\n  }\n}\n\n/**\n * Sign in with Google\n */\nexport async function signInWithGoogle(\n  role: 'user' | 'admin' | 'super admin' = 'user'\n) {\n  try {\n    const result = await signInWithPopup(auth, googleProvider);\n    const user = result.user;\n\n    // Check if user document exists\n    const userDoc = await getDoc(doc(db, 'users', user.uid));\n\n    if (!userDoc.exists()) {\n      // Create user document if it doesn't exist\n      const userData: UserData = {\n        uid: user.uid,\n        email: user.email,\n        displayName: user.displayName,\n        photoURL: user.photoURL,\n        role: role,\n        createdAt: serverTimestamp(),\n        updatedAt: serverTimestamp(),\n      };\n      await setDoc(doc(db, 'users', user.uid), userData);\n    } else {\n      // Update last login and role if needed\n      const updateData: any = { updatedAt: serverTimestamp() };\n      if (role === 'admin') {\n        updateData.role = 'admin';\n      }\n      await setDoc(doc(db, 'users', user.uid), updateData, { merge: true });\n    }\n\n    return { user, error: null };\n  } catch (error: any) {\n    console.error('Google sign-in error:', error);\n\n    // Handle specific error cases\n    let errorMessage =\n      error.message || 'An error occurred during Google sign-in';\n\n    if (error.code === 'auth/popup-closed-by-user') {\n      errorMessage = 'Sign-in popup was closed. Please try again.';\n    } else if (error.code === 'auth/popup-blocked') {\n      errorMessage =\n        'Popup was blocked by your browser. Please allow popups for this site and try again.';\n    } else if (error.code === 'auth/cancelled-popup-request') {\n      errorMessage = 'Sign-in was cancelled. Please try again.';\n    } else if (error.code === 'auth/account-exists-with-different-credential') {\n      errorMessage =\n        'An account already exists with this email. Please sign in with your existing method.';\n    }\n\n    return { user: null, error: errorMessage };\n  }\n}\n\n/**\n * Sign out\n */\nexport async function signOutUser() {\n  try {\n    await signOut(auth);\n    return { error: null };\n  } catch (error: any) {\n    return { error: error.message };\n  }\n}\n\n/**\n * Get current user\n */\nexport function getCurrentUser(): User | null {\n  return auth.currentUser;\n}\n\n/**\n * Listen to auth state changes\n */\nexport function onAuthStateChange(callback: (user: User | null) => void) {\n  return onAuthStateChanged(auth, callback);\n}\n\n/**\n * Get user data from Firestore\n */\nexport async function getUserData(uid: string): Promise<UserData | null> {\n  try {\n    const userDoc = await getDoc(doc(db, 'users', uid));\n    if (userDoc.exists()) {\n      return userDoc.data() as UserData;\n    }\n    return null;\n  } catch (error) {\n    console.error('Error getting user data:', error);\n    return null;\n  }\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAEA;AAAA;AAUA;AACA;AAAA;AAbA;;;;;AAgBA,MAAM,iBAAiB,IAAI,2RAAkB;AAC7C,kCAAkC;AAClC,eAAe,QAAQ,CAAC;AACxB,eAAe,QAAQ,CAAC;AACxB,wBAAwB;AACxB,eAAe,mBAAmB,CAAC;IACjC,QAAQ;AACV;AAeO,eAAe,oBAAoB,KAAa,EAAE,QAAgB;IACvE,IAAI;QACF,MAAM,iBAAiB,MAAM,IAAA,mSAA0B,EACrD,oIAAI,EACJ,OACA;QAEF,OAAO;YAAE,MAAM,eAAe,IAAI;YAAE,OAAO;QAAK;IAClD,EAAE,OAAO,OAAY;QACnB,OAAO;YAAE,MAAM;YAAM,OAAO,MAAM,OAAO;QAAC;IAC5C;AACF;AAKO,eAAe,oBACpB,KAAa,EACb,QAAgB,EAChB,WAAoB,EACpB,OAAyC,MAAM;IAE/C,IAAI;QACF,MAAM,iBAAiB,MAAM,IAAA,uSAA8B,EACzD,oIAAI,EACJ,OACA;QAGF,+CAA+C;QAC/C,IAAI,eAAe,eAAe,IAAI,EAAE;YACtC,MAAM,IAAA,sRAAa,EAAC,eAAe,IAAI,EAAE;gBAAE;YAAY;QACzD;QAEA,oCAAoC;QACpC,MAAM,WAAqB;YACzB,KAAK,eAAe,IAAI,CAAC,GAAG;YAC5B,OAAO,eAAe,IAAI,CAAC,KAAK;YAChC,aAAa,eAAe,eAAe,IAAI,CAAC,WAAW;YAC3D,UAAU,eAAe,IAAI,CAAC,QAAQ;YACtC,MAAM;YACN,WAAW,IAAA,kSAAe;YAC1B,WAAW,IAAA,kSAAe;QAC5B;QAEA,MAAM,IAAA,yRAAM,EAAC,IAAA,sRAAG,EAAC,kIAAE,EAAE,SAAS,eAAe,IAAI,CAAC,GAAG,GAAG;QAExD,OAAO;YAAE,MAAM,eAAe,IAAI;YAAE,OAAO;QAAK;IAClD,EAAE,OAAO,OAAY;QACnB,OAAO;YAAE,MAAM;YAAM,OAAO,MAAM,OAAO;QAAC;IAC5C;AACF;AAKO,eAAe,iBACpB,OAAyC,MAAM;IAE/C,IAAI;QACF,MAAM,SAAS,MAAM,IAAA,wRAAe,EAAC,oIAAI,EAAE;QAC3C,MAAM,OAAO,OAAO,IAAI;QAExB,gCAAgC;QAChC,MAAM,UAAU,MAAM,IAAA,yRAAM,EAAC,IAAA,sRAAG,EAAC,kIAAE,EAAE,SAAS,KAAK,GAAG;QAEtD,IAAI,CAAC,QAAQ,MAAM,IAAI;YACrB,2CAA2C;YAC3C,MAAM,WAAqB;gBACzB,KAAK,KAAK,GAAG;gBACb,OAAO,KAAK,KAAK;gBACjB,aAAa,KAAK,WAAW;gBAC7B,UAAU,KAAK,QAAQ;gBACvB,MAAM;gBACN,WAAW,IAAA,kSAAe;gBAC1B,WAAW,IAAA,kSAAe;YAC5B;YACA,MAAM,IAAA,yRAAM,EAAC,IAAA,sRAAG,EAAC,kIAAE,EAAE,SAAS,KAAK,GAAG,GAAG;QAC3C,OAAO;YACL,uCAAuC;YACvC,MAAM,aAAkB;gBAAE,WAAW,IAAA,kSAAe;YAAG;YACvD,IAAI,SAAS,SAAS;gBACpB,WAAW,IAAI,GAAG;YACpB;YACA,MAAM,IAAA,yRAAM,EAAC,IAAA,sRAAG,EAAC,kIAAE,EAAE,SAAS,KAAK,GAAG,GAAG,YAAY;gBAAE,OAAO;YAAK;QACrE;QAEA,OAAO;YAAE;YAAM,OAAO;QAAK;IAC7B,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC,yBAAyB;QAEvC,8BAA8B;QAC9B,IAAI,eACF,MAAM,OAAO,IAAI;QAEnB,IAAI,MAAM,IAAI,KAAK,6BAA6B;YAC9C,eAAe;QACjB,OAAO,IAAI,MAAM,IAAI,KAAK,sBAAsB;YAC9C,eACE;QACJ,OAAO,IAAI,MAAM,IAAI,KAAK,gCAAgC;YACxD,eAAe;QACjB,OAAO,IAAI,MAAM,IAAI,KAAK,iDAAiD;YACzE,eACE;QACJ;QAEA,OAAO;YAAE,MAAM;YAAM,OAAO;QAAa;IAC3C;AACF;AAKO,eAAe;IACpB,IAAI;QACF,MAAM,IAAA,gRAAO,EAAC,oIAAI;QAClB,OAAO;YAAE,OAAO;QAAK;IACvB,EAAE,OAAO,OAAY;QACnB,OAAO;YAAE,OAAO,MAAM,OAAO;QAAC;IAChC;AACF;AAKO,SAAS;IACd,OAAO,oIAAI,CAAC,WAAW;AACzB;AAKO,SAAS,kBAAkB,QAAqC;IACrE,OAAO,IAAA,2RAAkB,EAAC,oIAAI,EAAE;AAClC;AAKO,eAAe,YAAY,GAAW;IAC3C,IAAI;QACF,MAAM,UAAU,MAAM,IAAA,yRAAM,EAAC,IAAA,sRAAG,EAAC,kIAAE,EAAE,SAAS;QAC9C,IAAI,QAAQ,MAAM,IAAI;YACpB,OAAO,QAAQ,IAAI;QACrB;QACA,OAAO;IACT,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,4BAA4B;QAC1C,OAAO;IACT;AACF"}},
    {"offset": {"line": 223, "column": 0}, "map": {"version":3,"sources":["file:///Users/duke/Documents/GitHub/GradDrive/contexts/AuthContext.tsx"],"sourcesContent":["\"use client\"\n\nimport { createContext, useContext, useEffect, useState, ReactNode } from \"react\"\nimport { User, onAuthStateChanged } from \"firebase/auth\"\nimport { auth } from \"@/lib/firebase/config\"\nimport { getUserData, UserData } from \"@/lib/firebase/auth\"\n\ninterface AuthContextType {\n  user: User | null\n  userData: UserData | null\n  loading: boolean\n}\n\nconst AuthContext = createContext<AuthContextType>({\n  user: null,\n  userData: null,\n  loading: true,\n})\n\nexport function AuthProvider({ children }: { children: ReactNode }) {\n  const [user, setUser] = useState<User | null>(null)\n  const [userData, setUserData] = useState<UserData | null>(null)\n  const [loading, setLoading] = useState(true)\n\n  useEffect(() => {\n    const unsubscribe = onAuthStateChanged(auth, async (firebaseUser) => {\n      setUser(firebaseUser)\n      \n      if (firebaseUser) {\n        // Fetch user data from Firestore\n        const data = await getUserData(firebaseUser.uid)\n        setUserData(data)\n      } else {\n        setUserData(null)\n      }\n      \n      setLoading(false)\n    })\n\n    return () => unsubscribe()\n  }, [])\n\n  return (\n    <AuthContext.Provider value={{ user, userData, loading }}>\n      {children}\n    </AuthContext.Provider>\n  )\n}\n\nexport function useAuth() {\n  return useContext(AuthContext)\n}\n\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AAAA;AACA;AACA;;;AALA;;;;;AAaA,MAAM,4BAAc,IAAA,oRAAa,EAAkB;IACjD,MAAM;IACN,UAAU;IACV,SAAS;AACX;AAEO,SAAS,aAAa,EAAE,QAAQ,EAA2B;;IAChE,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,+QAAQ,EAAc;IAC9C,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,+QAAQ,EAAkB;IAC1D,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,+QAAQ,EAAC;IAEvC,IAAA,gRAAS;kCAAC;YACR,MAAM,cAAc,IAAA,2RAAkB,EAAC,oIAAI;sDAAE,OAAO;oBAClD,QAAQ;oBAER,IAAI,cAAc;wBAChB,iCAAiC;wBACjC,MAAM,OAAO,MAAM,IAAA,yIAAW,EAAC,aAAa,GAAG;wBAC/C,YAAY;oBACd,OAAO;wBACL,YAAY;oBACd;oBAEA,WAAW;gBACb;;YAEA;0CAAO,IAAM;;QACf;iCAAG,EAAE;IAEL,qBACE,mSAAC,YAAY,QAAQ;QAAC,OAAO;YAAE;YAAM;YAAU;QAAQ;kBACpD;;;;;;AAGP;GA5BgB;KAAA;AA8BT,SAAS;;IACd,OAAO,IAAA,iRAAU,EAAC;AACpB;IAFgB"}},
    {"offset": {"line": 301, "column": 0}, "map": {"version":3,"sources":["file:///Users/duke/Documents/GitHub/GradDrive/lib/firebase/firestore.ts"],"sourcesContent":["\"use client\"\n\nimport {\n  collection,\n  doc,\n  getDoc,\n  getDocs,\n  setDoc,\n  updateDoc,\n  deleteDoc,\n  query,\n  where,\n  orderBy,\n  limit,\n  serverTimestamp,\n  Timestamp,\n} from \"firebase/firestore\"\nimport { db } from \"./config\"\n\n// Type definitions\nexport interface Photographer {\n  id?: string\n  name: string\n  location: string\n  description: string\n  style: string\n  tags: string[]\n  price: number\n  rating: number\n  reviews: number\n  verified: boolean\n  email?: string\n  phone?: string\n  imageUrl?: string\n  createdAt?: Timestamp\n  updatedAt?: Timestamp\n}\n\nexport interface Poster {\n  id?: string\n  name: string\n  description: string\n  downloads: number\n  category?: string\n  tags?: string[]\n  imageUrl?: string\n  shopifyLink?: string\n  uploadedBy?: string\n  uploadedByName?: string\n  createdAt?: Timestamp\n  updatedAt?: Timestamp\n}\n\nexport interface Ebook {\n  id?: string\n  title: string\n  author: string\n  description: string\n  pages: number\n  available: boolean\n  category?: string\n  isbn?: string\n  thumbnailUrl?: string\n  fileUrl?: string\n  downloads?: number\n  uploadedBy?: string\n  uploadedByName?: string\n  uploadedByEmail?: string\n  createdAt?: Timestamp\n  updatedAt?: Timestamp\n}\n\nexport interface SystemLog {\n  id?: string\n  action: string\n  type: string\n  userId: string\n  userName: string\n  userEmail: string\n  userRole?: string\n  details?: any\n  timestamp: Timestamp\n}\n\n/**\n * Photographers Collection\n */\nexport const photographersCollection = collection(db, \"photographers\")\n\nexport async function getPhotographers(): Promise<Photographer[]> {\n  try {\n    const q = query(photographersCollection, orderBy(\"createdAt\", \"desc\"))\n    const snapshot = await getDocs(q)\n    return snapshot.docs.map((doc) => ({\n      id: doc.id,\n      ...doc.data(),\n    })) as Photographer[]\n  } catch (error) {\n    console.error(\"Error getting photographers:\", error)\n    return []\n  }\n}\n\nexport async function getPhotographer(id: string): Promise<Photographer | null> {\n  try {\n    const docRef = doc(db, \"photographers\", id)\n    const docSnap = await getDoc(docRef)\n    if (docSnap.exists()) {\n      return { id: docSnap.id, ...docSnap.data() } as Photographer\n    }\n    return null\n  } catch (error) {\n    console.error(\"Error getting photographer:\", error)\n    return null\n  }\n}\n\nexport async function addPhotographer(data: Omit<Photographer, \"id\" | \"createdAt\" | \"updatedAt\">): Promise<string | null> {\n  try {\n    const docRef = doc(photographersCollection)\n    await setDoc(docRef, {\n      ...data,\n      createdAt: serverTimestamp(),\n      updatedAt: serverTimestamp(),\n    })\n    return docRef.id\n  } catch (error) {\n    console.error(\"Error adding photographer:\", error)\n    return null\n  }\n}\n\nexport async function updatePhotographer(id: string, data: Partial<Photographer>): Promise<boolean> {\n  try {\n    const docRef = doc(db, \"photographers\", id)\n    await updateDoc(docRef, {\n      ...data,\n      updatedAt: serverTimestamp(),\n    })\n    return true\n  } catch (error) {\n    console.error(\"Error updating photographer:\", error)\n    return false\n  }\n}\n\nexport async function deletePhotographer(id: string): Promise<boolean> {\n  try {\n    await deleteDoc(doc(db, \"photographers\", id))\n    return true\n  } catch (error) {\n    console.error(\"Error deleting photographer:\", error)\n    return false\n  }\n}\n\n/**\n * Posters Collection\n */\nexport const postersCollection = collection(db, \"posters\")\n\nexport async function getPosters(): Promise<Poster[]> {\n  try {\n    const q = query(postersCollection, orderBy(\"createdAt\", \"desc\"))\n    const snapshot = await getDocs(q)\n    return snapshot.docs.map((doc) => ({\n      id: doc.id,\n      ...doc.data(),\n    })) as Poster[]\n  } catch (error) {\n    console.error(\"Error getting posters:\", error)\n    return []\n  }\n}\n\nexport async function getPoster(id: string): Promise<Poster | null> {\n  try {\n    const docRef = doc(db, \"posters\", id)\n    const docSnap = await getDoc(docRef)\n    if (docSnap.exists()) {\n      return { id: docSnap.id, ...docSnap.data() } as Poster\n    }\n    return null\n  } catch (error) {\n    console.error(\"Error getting poster:\", error)\n    return null\n  }\n}\n\nexport async function addPoster(data: Omit<Poster, \"id\" | \"createdAt\" | \"updatedAt\" | \"downloads\">): Promise<string | null> {\n  try {\n    const docRef = doc(postersCollection)\n    await setDoc(docRef, {\n      ...data,\n      downloads: 0,\n      createdAt: serverTimestamp(),\n      updatedAt: serverTimestamp(),\n    })\n    return docRef.id\n  } catch (error) {\n    console.error(\"Error adding poster:\", error)\n    return null\n  }\n}\n\nexport async function updatePoster(id: string, data: Partial<Poster>): Promise<boolean> {\n  try {\n    const docRef = doc(db, \"posters\", id)\n    await updateDoc(docRef, {\n      ...data,\n      updatedAt: serverTimestamp(),\n    })\n    return true\n  } catch (error) {\n    console.error(\"Error updating poster:\", error)\n    return false\n  }\n}\n\nexport async function deletePoster(id: string, imageUrl?: string): Promise<boolean> {\n  try {\n    // Delete from Firestore\n    await deleteDoc(doc(db, \"posters\", id))\n    \n    // Note: Storage deletion should be handled by the caller\n    // since we need to import deleteFile from storage.ts\n    // and this file should focus on Firestore operations\n    \n    return true\n  } catch (error) {\n    console.error(\"Error deleting poster:\", error)\n    return false\n  }\n}\n\n/**\n * Cap Designs Collection\n */\nexport const capDesignsCollection = collection(db, \"capDesigns\")\n\nexport async function getCapDesigns(): Promise<Poster[]> {\n  try {\n    const q = query(capDesignsCollection, orderBy(\"createdAt\", \"desc\"))\n    const snapshot = await getDocs(q)\n    return snapshot.docs.map((doc) => ({\n      id: doc.id,\n      ...doc.data(),\n    })) as Poster[]\n  } catch (error) {\n    console.error(\"Error getting cap designs:\", error)\n    return []\n  }\n}\n\nexport async function getCapDesign(id: string): Promise<Poster | null> {\n  try {\n    const docRef = doc(db, \"capDesigns\", id)\n    const docSnap = await getDoc(docRef)\n    if (docSnap.exists()) {\n      return { id: docSnap.id, ...docSnap.data() } as Poster\n    }\n    return null\n  } catch (error) {\n    console.error(\"Error getting cap design:\", error)\n    return null\n  }\n}\n\nexport async function addCapDesign(data: Omit<Poster, \"id\" | \"createdAt\" | \"updatedAt\" | \"downloads\">): Promise<string | null> {\n  try {\n    const docRef = doc(capDesignsCollection)\n    const designData: any = {\n      ...data,\n      downloads: 0,\n      createdAt: serverTimestamp(),\n      updatedAt: serverTimestamp(),\n    }\n    // Remove undefined values\n    Object.keys(designData).forEach(key => {\n      if (designData[key] === undefined) {\n        delete designData[key]\n      }\n    })\n    await setDoc(docRef, designData)\n    return docRef.id\n  } catch (error) {\n    console.error(\"Error adding cap design:\", error)\n    return null\n  }\n}\n\nexport async function updateCapDesign(id: string, data: Partial<Poster>): Promise<boolean> {\n  try {\n    const docRef = doc(db, \"capDesigns\", id)\n    const updateData: any = { ...data, updatedAt: serverTimestamp() }\n    // Remove undefined values\n    Object.keys(updateData).forEach(key => {\n      if (updateData[key] === undefined) {\n        delete updateData[key]\n      }\n    })\n    await updateDoc(docRef, updateData)\n    return true\n  } catch (error) {\n    console.error(\"Error updating cap design:\", error)\n    return false\n  }\n}\n\nexport async function deleteCapDesign(id: string): Promise<boolean> {\n  try {\n    await deleteDoc(doc(db, \"capDesigns\", id))\n    return true\n  } catch (error) {\n    console.error(\"Error deleting cap design:\", error)\n    return false\n  }\n}\n\n/**\n * Ebooks Collection\n */\nexport const ebooksCollection = collection(db, \"ebooks\")\n\nexport async function getEbooks(): Promise<Ebook[]> {\n  try {\n    const q = query(ebooksCollection, orderBy(\"createdAt\", \"desc\"))\n    const snapshot = await getDocs(q)\n    return snapshot.docs.map((doc) => ({\n      id: doc.id,\n      ...doc.data(),\n    })) as Ebook[]\n  } catch (error) {\n    console.error(\"Error getting ebooks:\", error)\n    return []\n  }\n}\n\nexport async function getEbook(id: string): Promise<Ebook | null> {\n  try {\n    const docRef = doc(db, \"ebooks\", id)\n    const docSnap = await getDoc(docRef)\n    if (docSnap.exists()) {\n      return { id: docSnap.id, ...docSnap.data() } as Ebook\n    }\n    return null\n  } catch (error) {\n    console.error(\"Error getting ebook:\", error)\n    return null\n  }\n}\n\nexport async function addEbook(data: Omit<Ebook, \"id\" | \"createdAt\" | \"updatedAt\" | \"downloads\">): Promise<string | null> {\n  try {\n    const docRef = doc(ebooksCollection)\n    const ebookData: any = {\n      ...data,\n      downloads: 0,\n      createdAt: serverTimestamp(),\n      updatedAt: serverTimestamp(),\n    }\n    // Remove undefined values\n    Object.keys(ebookData).forEach(key => {\n      if (ebookData[key] === undefined) {\n        delete ebookData[key]\n      }\n    })\n    await setDoc(docRef, ebookData)\n    return docRef.id\n  } catch (error) {\n    console.error(\"Error adding ebook:\", error)\n    return null\n  }\n}\n\nexport async function updateEbook(id: string, data: Partial<Ebook>): Promise<boolean> {\n  try {\n    const docRef = doc(db, \"ebooks\", id)\n    await updateDoc(docRef, {\n      ...data,\n      updatedAt: serverTimestamp(),\n    })\n    return true\n  } catch (error) {\n    console.error(\"Error updating ebook:\", error)\n    return false\n  }\n}\n\nexport async function deleteEbook(id: string): Promise<boolean> {\n  try {\n    await deleteDoc(doc(db, \"ebooks\", id))\n    return true\n  } catch (error) {\n    console.error(\"Error deleting ebook:\", error)\n    return false\n  }\n}\n\n/**\n * System Logs Collection\n */\nexport const logsCollection = collection(db, \"systemLogs\")\n\nexport async function getSystemLogs(limitCount: number = 50): Promise<SystemLog[]> {\n  try {\n    const q = query(logsCollection, orderBy(\"timestamp\", \"desc\"), limit(limitCount))\n    const snapshot = await getDocs(q)\n    return snapshot.docs.map((doc) => ({\n      id: doc.id,\n      ...doc.data(),\n    })) as SystemLog[]\n  } catch (error) {\n    console.error(\"Error getting system logs:\", error)\n    return []\n  }\n}\n\nexport async function addSystemLog(\n  action: string,\n  type: string,\n  userId: string,\n  userName: string,\n  userEmail: string,\n  details?: any,\n  userRole?: string\n): Promise<string | null> {\n  try {\n    // If role not provided, try to get it from user document\n    let role = userRole;\n    if (!role) {\n      try {\n        const userDoc = await getDoc(doc(db, \"users\", userId));\n        if (userDoc.exists()) {\n          role = userDoc.data().role || 'user';\n        }\n      } catch (e) {\n        // If we can't get role, continue without it\n      }\n    }\n\n    const docRef = doc(logsCollection)\n    await setDoc(docRef, {\n      action,\n      type,\n      userId,\n      userName,\n      userEmail,\n      userRole: role || 'user',\n      details,\n      timestamp: serverTimestamp(),\n    })\n    return docRef.id\n  } catch (error) {\n    console.error(\"Error adding system log:\", error)\n    return null\n  }\n}\n\n/**\n * Users Collection\n */\nexport async function getUserRole(uid: string): Promise<\"user\" | \"admin\" | \"super admin\" | null> {\n  try {\n    const userDoc = await getDoc(doc(db, \"users\", uid))\n    if (userDoc.exists()) {\n      const data = userDoc.data()\n      return data.role || \"user\"\n    }\n    return null\n  } catch (error) {\n    console.error(\"Error getting user role:\", error)\n    return null\n  }\n}\n\nexport async function setUserRole(uid: string, role: \"user\" | \"admin\" | \"super admin\"): Promise<boolean> {\n  try {\n    await updateDoc(doc(db, \"users\", uid), {\n      role,\n      updatedAt: serverTimestamp(),\n    })\n    return true\n  } catch (error) {\n    console.error(\"Error setting user role:\", error)\n    return false\n  }\n}\n\n/**\n * Analytics Functions\n */\nexport interface AnalyticsData {\n  totalUsers: number\n  totalAdmins: number\n  totalDownloads: number\n  photographersListed: number\n  postersUploaded: number\n  capDesigns: number\n  recentActivity: SystemLog[]\n}\n\nexport async function getAnalytics(): Promise<AnalyticsData> {\n  try {\n    // Get all users\n    const usersSnapshot = await getDocs(collection(db, \"users\"))\n    // Total users = only users with role \"user\" (excludes admins)\n    const totalUsers = usersSnapshot.docs.filter(\n      (doc) => {\n        const role = doc.data().role;\n        return !role || role === 'user';\n      }\n    ).length\n    const totalAdmins = usersSnapshot.docs.filter(\n      (doc) => doc.data().role === 'admin' || doc.data().role === 'super admin'\n    ).length\n\n    // Get total downloads from posters, ebooks, and cap designs\n    const postersSnapshot = await getDocs(collection(db, \"posters\"))\n    const ebooksSnapshot = await getDocs(collection(db, \"ebooks\"))\n    const capDesignsSnapshot = await getDocs(collection(db, \"capDesigns\"))\n    \n    let totalDownloads = 0\n    postersSnapshot.docs.forEach((doc) => {\n      totalDownloads += doc.data().downloads || 0\n    })\n    ebooksSnapshot.docs.forEach((doc) => {\n      totalDownloads += doc.data().downloads || 0\n    })\n    capDesignsSnapshot.docs.forEach((doc) => {\n      totalDownloads += doc.data().downloads || 0\n    })\n\n    // Get photographers count\n    const photographersSnapshot = await getDocs(collection(db, \"photographers\"))\n    const photographersListed = photographersSnapshot.size\n\n    // Get counts\n    const postersUploaded = postersSnapshot.size\n    const capDesigns = capDesignsSnapshot.size\n\n    // Get recent activity (last 10 logs)\n    const recentActivity = await getSystemLogs(10)\n\n    return {\n      totalUsers,\n      totalAdmins,\n      totalDownloads,\n      photographersListed,\n      postersUploaded,\n      capDesigns,\n      recentActivity,\n    }\n  } catch (error) {\n    console.error(\"Error getting analytics:\", error)\n    return {\n      totalUsers: 0,\n      totalAdmins: 0,\n      totalDownloads: 0,\n      photographersListed: 0,\n      postersUploaded: 0,\n      capDesigns: 0,\n      recentActivity: [],\n    }\n  }\n}\n\n// Get all users with details\nexport async function getAllUsers(): Promise<any[]> {\n  try {\n    const usersSnapshot = await getDocs(collection(db, \"users\"))\n    return usersSnapshot.docs.map((doc) => ({\n      id: doc.id,\n      ...doc.data(),\n    }))\n  } catch (error) {\n    console.error(\"Error getting users:\", error)\n    return []\n  }\n}\n\n// Get download breakdown\nexport async function getDownloadBreakdown(): Promise<{\n  posters: { name: string; downloads: number; id: string }[]\n  ebooks: { title: string; downloads: number; id: string }[]\n  capDesigns: { name: string; downloads: number; id: string }[]\n}> {\n  try {\n    const postersSnapshot = await getDocs(collection(db, \"posters\"))\n    const ebooksSnapshot = await getDocs(collection(db, \"ebooks\"))\n    const capDesignsSnapshot = await getDocs(collection(db, \"capDesigns\"))\n\n    const posters = postersSnapshot.docs.map((doc) => ({\n      id: doc.id,\n      name: doc.data().name,\n      downloads: doc.data().downloads || 0,\n    })).sort((a, b) => b.downloads - a.downloads)\n\n    const ebooks = ebooksSnapshot.docs.map((doc) => ({\n      id: doc.id,\n      title: doc.data().title,\n      downloads: doc.data().downloads || 0,\n    })).sort((a, b) => b.downloads - a.downloads)\n\n    const capDesigns = capDesignsSnapshot.docs.map((doc) => ({\n      id: doc.id,\n      name: doc.data().name,\n      downloads: doc.data().downloads || 0,\n    })).sort((a, b) => b.downloads - a.downloads)\n\n    return { posters, ebooks, capDesigns }\n  } catch (error) {\n    console.error(\"Error getting download breakdown:\", error)\n    return { posters: [], ebooks: [], capDesigns: [] }\n  }\n}\n\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 842, "column": 0}, "map": {"version":3,"sources":["file:///Users/duke/Documents/GitHub/GradDrive/contexts/DataContext.tsx"],"sourcesContent":["'use client';\n\nimport { createContext, useContext, useState, useEffect, ReactNode, useCallback } from 'react';\nimport { getAnalytics, getAllUsers, getDownloadBreakdown, type AnalyticsData } from '@/lib/firebase/firestore';\n\ninterface DataContextType {\n  analytics: AnalyticsData | null;\n  users: any[] | null;\n  downloadBreakdown: {\n    posters: any[];\n    ebooks: any[];\n    capDesigns: any[];\n  } | null;\n  loading: boolean;\n  refreshAnalytics: () => Promise<void>;\n  refreshUsers: () => Promise<void>;\n  refreshDownloadBreakdown: () => Promise<void>;\n}\n\nconst DataContext = createContext<DataContextType>({\n  analytics: null,\n  users: null,\n  downloadBreakdown: null,\n  loading: true,\n  refreshAnalytics: async () => {},\n  refreshUsers: async () => {},\n  refreshDownloadBreakdown: async () => {},\n});\n\nexport function DataProvider({ children }: { children: ReactNode }) {\n  const [analytics, setAnalytics] = useState<AnalyticsData | null>(null);\n  const [users, setUsers] = useState<any[] | null>(null);\n  const [downloadBreakdown, setDownloadBreakdown] = useState<any>(null);\n  const [loading, setLoading] = useState(true);\n\n  const refreshAnalytics = useCallback(async () => {\n    try {\n      const data = await getAnalytics();\n      setAnalytics(data);\n    } catch (error) {\n      console.error('Error refreshing analytics:', error);\n    }\n  }, []);\n\n  const refreshUsers = useCallback(async () => {\n    try {\n      const data = await getAllUsers();\n      setUsers(data);\n    } catch (error) {\n      console.error('Error refreshing users:', error);\n    }\n  }, []);\n\n  const refreshDownloadBreakdown = useCallback(async () => {\n    try {\n      const data = await getDownloadBreakdown();\n      setDownloadBreakdown(data);\n    } catch (error) {\n      console.error('Error refreshing download breakdown:', error);\n    }\n  }, []);\n\n  // Initial load\n  useEffect(() => {\n    const loadInitialData = async () => {\n      setLoading(true);\n      try {\n        await Promise.all([\n          refreshAnalytics(),\n          refreshUsers(),\n          refreshDownloadBreakdown(),\n        ]);\n      } catch (error) {\n        console.error('Error loading initial data:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    loadInitialData();\n  }, [refreshAnalytics, refreshUsers, refreshDownloadBreakdown]);\n\n  return (\n    <DataContext.Provider\n      value={{\n        analytics,\n        users,\n        downloadBreakdown,\n        loading,\n        refreshAnalytics,\n        refreshUsers,\n        refreshDownloadBreakdown,\n      }}\n    >\n      {children}\n    </DataContext.Provider>\n  );\n}\n\nexport function useData() {\n  return useContext(DataContext);\n}\n\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;;;AAHA;;;AAmBA,MAAM,4BAAc,IAAA,oRAAa,EAAkB;IACjD,WAAW;IACX,OAAO;IACP,mBAAmB;IACnB,SAAS;IACT,kBAAkB,WAAa;IAC/B,cAAc,WAAa;IAC3B,0BAA0B,WAAa;AACzC;AAEO,SAAS,aAAa,EAAE,QAAQ,EAA2B;;IAChE,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,+QAAQ,EAAuB;IACjE,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,+QAAQ,EAAe;IACjD,MAAM,CAAC,mBAAmB,qBAAqB,GAAG,IAAA,+QAAQ,EAAM;IAChE,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,+QAAQ,EAAC;IAEvC,MAAM,mBAAmB,IAAA,kRAAW;sDAAC;YACnC,IAAI;gBACF,MAAM,OAAO,MAAM,IAAA,+IAAY;gBAC/B,aAAa;YACf,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,+BAA+B;YAC/C;QACF;qDAAG,EAAE;IAEL,MAAM,eAAe,IAAA,kRAAW;kDAAC;YAC/B,IAAI;gBACF,MAAM,OAAO,MAAM,IAAA,8IAAW;gBAC9B,SAAS;YACX,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,2BAA2B;YAC3C;QACF;iDAAG,EAAE;IAEL,MAAM,2BAA2B,IAAA,kRAAW;8DAAC;YAC3C,IAAI;gBACF,MAAM,OAAO,MAAM,IAAA,uJAAoB;gBACvC,qBAAqB;YACvB,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,wCAAwC;YACxD;QACF;6DAAG,EAAE;IAEL,eAAe;IACf,IAAA,gRAAS;kCAAC;YACR,MAAM;0DAAkB;oBACtB,WAAW;oBACX,IAAI;wBACF,MAAM,QAAQ,GAAG,CAAC;4BAChB;4BACA;4BACA;yBACD;oBACH,EAAE,OAAO,OAAO;wBACd,QAAQ,KAAK,CAAC,+BAA+B;oBAC/C,SAAU;wBACR,WAAW;oBACb;gBACF;;YAEA;QACF;iCAAG;QAAC;QAAkB;QAAc;KAAyB;IAE7D,qBACE,mSAAC,YAAY,QAAQ;QACnB,OAAO;YACL;YACA;YACA;YACA;YACA;YACA;YACA;QACF;kBAEC;;;;;;AAGP;GApEgB;KAAA;AAsET,SAAS;;IACd,OAAO,IAAA,iRAAU,EAAC;AACpB;IAFgB"}}]
}