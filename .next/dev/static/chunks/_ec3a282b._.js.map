{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/duke/Documents/GitHub/GradDrive/lib/firebase/config.ts"],"sourcesContent":["import { initializeApp, getApps, FirebaseApp } from \"firebase/app\"\nimport { getAuth, Auth } from \"firebase/auth\"\nimport { getStorage, FirebaseStorage } from \"firebase/storage\"\nimport { getFirestore, Firestore } from \"firebase/firestore\"\n\nconst firebaseConfig = {\n  apiKey: process.env.NEXT_PUBLIC_FIREBASE_API_KEY || \"AIzaSyANOxmLGz-PNCDTYKVUv_tomcFroqLVA8A\",\n  authDomain: process.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN || \"graddrive-e3695.firebaseapp.com\",\n  projectId: process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID || \"graddrive-e3695\",\n  storageBucket: process.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET || \"graddrive-e3695.firebasestorage.app\",\n  messagingSenderId: process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID || \"721935097812\",\n  appId: process.env.NEXT_PUBLIC_FIREBASE_APP_ID || \"1:721935097812:web:eece464983d41da455c041\",\n  measurementId: process.env.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID || \"G-FLDCT8LMJX\"\n}\n\n// Initialize Firebase\nlet app: FirebaseApp\nif (getApps().length === 0) {\n  app = initializeApp(firebaseConfig)\n} else {\n  app = getApps()[0]\n}\n\n// Initialize Firebase services\nexport const auth: Auth = getAuth(app)\nexport const storage: FirebaseStorage = getStorage(app)\nexport const db: Firestore = getFirestore(app)\n\nexport default app\n\n"],"names":[],"mappings":";;;;;;;;;;AAMU;AANV;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;;;;;AAEA,MAAM,iBAAiB;IACrB,QAAQ,iRAAO,CAAC,GAAG,CAAC,4BAA4B,IAAI;IACpD,YAAY,iRAAO,CAAC,GAAG,CAAC,gCAAgC,IAAI;IAC5D,WAAW,iRAAO,CAAC,GAAG,CAAC,+BAA+B,IAAI;IAC1D,eAAe,iRAAO,CAAC,GAAG,CAAC,mCAAmC,IAAI;IAClE,mBAAmB,iRAAO,CAAC,GAAG,CAAC,wCAAwC,IAAI;IAC3E,OAAO,iRAAO,CAAC,GAAG,CAAC,2BAA2B,IAAI;IAClD,eAAe,iRAAO,CAAC,GAAG,CAAC,mCAAmC,IAAI;AACpE;AAEA,sBAAsB;AACtB,IAAI;AACJ,IAAI,IAAA,kPAAO,IAAG,MAAM,KAAK,GAAG;IAC1B,MAAM,IAAA,wPAAa,EAAC;AACtB,OAAO;IACL,MAAM,IAAA,kPAAO,GAAE,CAAC,EAAE;AACpB;AAGO,MAAM,OAAa,IAAA,gRAAO,EAAC;AAC3B,MAAM,UAA2B,IAAA,0RAAU,EAAC;AAC5C,MAAM,KAAgB,IAAA,+RAAY,EAAC;uCAE3B"}},
    {"offset": {"line": 54, "column": 0}, "map": {"version":3,"sources":["file:///Users/duke/Documents/GitHub/GradDrive/lib/firebase/auth.ts"],"sourcesContent":["'use client';\n\nimport {\n  signInWithEmailAndPassword,\n  createUserWithEmailAndPassword,\n  signInWithPopup,\n  GoogleAuthProvider,\n  signOut,\n  User,\n  onAuthStateChanged,\n  updateProfile,\n} from 'firebase/auth';\nimport { auth } from './config';\nimport { doc, setDoc, getDoc, serverTimestamp } from 'firebase/firestore';\nimport { db } from './config';\n\nconst googleProvider = new GoogleAuthProvider();\n// Add additional scopes if needed\ngoogleProvider.addScope('profile');\ngoogleProvider.addScope('email');\n// Set custom parameters\ngoogleProvider.setCustomParameters({\n  prompt: 'select_account',\n});\n\nexport interface UserData {\n  uid: string;\n  email: string | null;\n  displayName: string | null;\n  photoURL: string | null;\n  role?: 'user' | 'admin' | 'super admin';\n  createdAt?: any;\n  updatedAt?: any;\n}\n\n/**\n * Sign in with email and password\n */\nexport async function signInEmailPassword(email: string, password: string) {\n  try {\n    const userCredential = await signInWithEmailAndPassword(\n      auth,\n      email,\n      password\n    );\n    return { user: userCredential.user, error: null };\n  } catch (error: any) {\n    return { user: null, error: error.message };\n  }\n}\n\n/**\n * Sign up with email and password\n */\nexport async function signUpEmailPassword(\n  email: string,\n  password: string,\n  displayName?: string,\n  role: 'user' | 'admin' | 'super admin' = 'user'\n) {\n  try {\n    const userCredential = await createUserWithEmailAndPassword(\n      auth,\n      email,\n      password\n    );\n\n    // Update profile with display name if provided\n    if (displayName && userCredential.user) {\n      await updateProfile(userCredential.user, { displayName });\n    }\n\n    // Create user document in Firestore\n    const userData: UserData = {\n      uid: userCredential.user.uid,\n      email: userCredential.user.email,\n      displayName: displayName || userCredential.user.displayName,\n      photoURL: userCredential.user.photoURL,\n      role: role,\n      createdAt: serverTimestamp(),\n      updatedAt: serverTimestamp(),\n    };\n\n    await setDoc(doc(db, 'users', userCredential.user.uid), userData);\n\n    return { user: userCredential.user, error: null };\n  } catch (error: any) {\n    return { user: null, error: error.message };\n  }\n}\n\n/**\n * Sign in with Google\n */\nexport async function signInWithGoogle(\n  role: 'user' | 'admin' | 'super admin' = 'user'\n) {\n  try {\n    const result = await signInWithPopup(auth, googleProvider);\n    const user = result.user;\n\n    // Check if user document exists\n    const userDoc = await getDoc(doc(db, 'users', user.uid));\n\n    if (!userDoc.exists()) {\n      // Create user document if it doesn't exist\n      const userData: UserData = {\n        uid: user.uid,\n        email: user.email,\n        displayName: user.displayName,\n        photoURL: user.photoURL,\n        role: role,\n        createdAt: serverTimestamp(),\n        updatedAt: serverTimestamp(),\n      };\n      await setDoc(doc(db, 'users', user.uid), userData);\n    } else {\n      // Update last login and role if needed\n      const updateData: any = { updatedAt: serverTimestamp() };\n      if (role === 'admin') {\n        updateData.role = 'admin';\n      }\n      await setDoc(doc(db, 'users', user.uid), updateData, { merge: true });\n    }\n\n    return { user, error: null };\n  } catch (error: any) {\n    console.error('Google sign-in error:', error);\n\n    // Handle specific error cases\n    let errorMessage =\n      error.message || 'An error occurred during Google sign-in';\n\n    if (error.code === 'auth/popup-closed-by-user') {\n      errorMessage = 'Sign-in popup was closed. Please try again.';\n    } else if (error.code === 'auth/popup-blocked') {\n      errorMessage =\n        'Popup was blocked by your browser. Please allow popups for this site and try again.';\n    } else if (error.code === 'auth/cancelled-popup-request') {\n      errorMessage = 'Sign-in was cancelled. Please try again.';\n    } else if (error.code === 'auth/account-exists-with-different-credential') {\n      errorMessage =\n        'An account already exists with this email. Please sign in with your existing method.';\n    }\n\n    return { user: null, error: errorMessage };\n  }\n}\n\n/**\n * Sign out\n */\nexport async function signOutUser() {\n  try {\n    await signOut(auth);\n    return { error: null };\n  } catch (error: any) {\n    return { error: error.message };\n  }\n}\n\n/**\n * Get current user\n */\nexport function getCurrentUser(): User | null {\n  return auth.currentUser;\n}\n\n/**\n * Listen to auth state changes\n */\nexport function onAuthStateChange(callback: (user: User | null) => void) {\n  return onAuthStateChanged(auth, callback);\n}\n\n/**\n * Get user data from Firestore\n */\nexport async function getUserData(uid: string): Promise<UserData | null> {\n  try {\n    const userDoc = await getDoc(doc(db, 'users', uid));\n    if (userDoc.exists()) {\n      return userDoc.data() as UserData;\n    }\n    return null;\n  } catch (error) {\n    console.error('Error getting user data:', error);\n    return null;\n  }\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAEA;AAAA;AAUA;AACA;AAAA;AAbA;;;;;AAgBA,MAAM,iBAAiB,IAAI,2RAAkB;AAC7C,kCAAkC;AAClC,eAAe,QAAQ,CAAC;AACxB,eAAe,QAAQ,CAAC;AACxB,wBAAwB;AACxB,eAAe,mBAAmB,CAAC;IACjC,QAAQ;AACV;AAeO,eAAe,oBAAoB,KAAa,EAAE,QAAgB;IACvE,IAAI;QACF,MAAM,iBAAiB,MAAM,IAAA,mSAA0B,EACrD,oIAAI,EACJ,OACA;QAEF,OAAO;YAAE,MAAM,eAAe,IAAI;YAAE,OAAO;QAAK;IAClD,EAAE,OAAO,OAAY;QACnB,OAAO;YAAE,MAAM;YAAM,OAAO,MAAM,OAAO;QAAC;IAC5C;AACF;AAKO,eAAe,oBACpB,KAAa,EACb,QAAgB,EAChB,WAAoB,EACpB,OAAyC,MAAM;IAE/C,IAAI;QACF,MAAM,iBAAiB,MAAM,IAAA,uSAA8B,EACzD,oIAAI,EACJ,OACA;QAGF,+CAA+C;QAC/C,IAAI,eAAe,eAAe,IAAI,EAAE;YACtC,MAAM,IAAA,sRAAa,EAAC,eAAe,IAAI,EAAE;gBAAE;YAAY;QACzD;QAEA,oCAAoC;QACpC,MAAM,WAAqB;YACzB,KAAK,eAAe,IAAI,CAAC,GAAG;YAC5B,OAAO,eAAe,IAAI,CAAC,KAAK;YAChC,aAAa,eAAe,eAAe,IAAI,CAAC,WAAW;YAC3D,UAAU,eAAe,IAAI,CAAC,QAAQ;YACtC,MAAM;YACN,WAAW,IAAA,kSAAe;YAC1B,WAAW,IAAA,kSAAe;QAC5B;QAEA,MAAM,IAAA,yRAAM,EAAC,IAAA,sRAAG,EAAC,kIAAE,EAAE,SAAS,eAAe,IAAI,CAAC,GAAG,GAAG;QAExD,OAAO;YAAE,MAAM,eAAe,IAAI;YAAE,OAAO;QAAK;IAClD,EAAE,OAAO,OAAY;QACnB,OAAO;YAAE,MAAM;YAAM,OAAO,MAAM,OAAO;QAAC;IAC5C;AACF;AAKO,eAAe,iBACpB,OAAyC,MAAM;IAE/C,IAAI;QACF,MAAM,SAAS,MAAM,IAAA,wRAAe,EAAC,oIAAI,EAAE;QAC3C,MAAM,OAAO,OAAO,IAAI;QAExB,gCAAgC;QAChC,MAAM,UAAU,MAAM,IAAA,yRAAM,EAAC,IAAA,sRAAG,EAAC,kIAAE,EAAE,SAAS,KAAK,GAAG;QAEtD,IAAI,CAAC,QAAQ,MAAM,IAAI;YACrB,2CAA2C;YAC3C,MAAM,WAAqB;gBACzB,KAAK,KAAK,GAAG;gBACb,OAAO,KAAK,KAAK;gBACjB,aAAa,KAAK,WAAW;gBAC7B,UAAU,KAAK,QAAQ;gBACvB,MAAM;gBACN,WAAW,IAAA,kSAAe;gBAC1B,WAAW,IAAA,kSAAe;YAC5B;YACA,MAAM,IAAA,yRAAM,EAAC,IAAA,sRAAG,EAAC,kIAAE,EAAE,SAAS,KAAK,GAAG,GAAG;QAC3C,OAAO;YACL,uCAAuC;YACvC,MAAM,aAAkB;gBAAE,WAAW,IAAA,kSAAe;YAAG;YACvD,IAAI,SAAS,SAAS;gBACpB,WAAW,IAAI,GAAG;YACpB;YACA,MAAM,IAAA,yRAAM,EAAC,IAAA,sRAAG,EAAC,kIAAE,EAAE,SAAS,KAAK,GAAG,GAAG,YAAY;gBAAE,OAAO;YAAK;QACrE;QAEA,OAAO;YAAE;YAAM,OAAO;QAAK;IAC7B,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC,yBAAyB;QAEvC,8BAA8B;QAC9B,IAAI,eACF,MAAM,OAAO,IAAI;QAEnB,IAAI,MAAM,IAAI,KAAK,6BAA6B;YAC9C,eAAe;QACjB,OAAO,IAAI,MAAM,IAAI,KAAK,sBAAsB;YAC9C,eACE;QACJ,OAAO,IAAI,MAAM,IAAI,KAAK,gCAAgC;YACxD,eAAe;QACjB,OAAO,IAAI,MAAM,IAAI,KAAK,iDAAiD;YACzE,eACE;QACJ;QAEA,OAAO;YAAE,MAAM;YAAM,OAAO;QAAa;IAC3C;AACF;AAKO,eAAe;IACpB,IAAI;QACF,MAAM,IAAA,gRAAO,EAAC,oIAAI;QAClB,OAAO;YAAE,OAAO;QAAK;IACvB,EAAE,OAAO,OAAY;QACnB,OAAO;YAAE,OAAO,MAAM,OAAO;QAAC;IAChC;AACF;AAKO,SAAS;IACd,OAAO,oIAAI,CAAC,WAAW;AACzB;AAKO,SAAS,kBAAkB,QAAqC;IACrE,OAAO,IAAA,2RAAkB,EAAC,oIAAI,EAAE;AAClC;AAKO,eAAe,YAAY,GAAW;IAC3C,IAAI;QACF,MAAM,UAAU,MAAM,IAAA,yRAAM,EAAC,IAAA,sRAAG,EAAC,kIAAE,EAAE,SAAS;QAC9C,IAAI,QAAQ,MAAM,IAAI;YACpB,OAAO,QAAQ,IAAI;QACrB;QACA,OAAO;IACT,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,4BAA4B;QAC1C,OAAO;IACT;AACF"}},
    {"offset": {"line": 223, "column": 0}, "map": {"version":3,"sources":["file:///Users/duke/Documents/GitHub/GradDrive/contexts/AuthContext.tsx"],"sourcesContent":["\"use client\"\n\nimport { createContext, useContext, useEffect, useState, ReactNode } from \"react\"\nimport { User, onAuthStateChanged } from \"firebase/auth\"\nimport { auth } from \"@/lib/firebase/config\"\nimport { getUserData, UserData } from \"@/lib/firebase/auth\"\n\ninterface AuthContextType {\n  user: User | null\n  userData: UserData | null\n  loading: boolean\n}\n\nconst AuthContext = createContext<AuthContextType>({\n  user: null,\n  userData: null,\n  loading: true,\n})\n\nexport function AuthProvider({ children }: { children: ReactNode }) {\n  const [user, setUser] = useState<User | null>(null)\n  const [userData, setUserData] = useState<UserData | null>(null)\n  const [loading, setLoading] = useState(true)\n\n  useEffect(() => {\n    const unsubscribe = onAuthStateChanged(auth, async (firebaseUser) => {\n      setUser(firebaseUser)\n      \n      if (firebaseUser) {\n        // Fetch user data from Firestore\n        const data = await getUserData(firebaseUser.uid)\n        setUserData(data)\n      } else {\n        setUserData(null)\n      }\n      \n      setLoading(false)\n    })\n\n    return () => unsubscribe()\n  }, [])\n\n  return (\n    <AuthContext.Provider value={{ user, userData, loading }}>\n      {children}\n    </AuthContext.Provider>\n  )\n}\n\nexport function useAuth() {\n  return useContext(AuthContext)\n}\n\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AAAA;AACA;AACA;;;AALA;;;;;AAaA,MAAM,4BAAc,IAAA,oRAAa,EAAkB;IACjD,MAAM;IACN,UAAU;IACV,SAAS;AACX;AAEO,SAAS,aAAa,EAAE,QAAQ,EAA2B;;IAChE,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,+QAAQ,EAAc;IAC9C,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,+QAAQ,EAAkB;IAC1D,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,+QAAQ,EAAC;IAEvC,IAAA,gRAAS;kCAAC;YACR,MAAM,cAAc,IAAA,2RAAkB,EAAC,oIAAI;sDAAE,OAAO;oBAClD,QAAQ;oBAER,IAAI,cAAc;wBAChB,iCAAiC;wBACjC,MAAM,OAAO,MAAM,IAAA,yIAAW,EAAC,aAAa,GAAG;wBAC/C,YAAY;oBACd,OAAO;wBACL,YAAY;oBACd;oBAEA,WAAW;gBACb;;YAEA;0CAAO,IAAM;;QACf;iCAAG,EAAE;IAEL,qBACE,mSAAC,YAAY,QAAQ;QAAC,OAAO;YAAE;YAAM;YAAU;QAAQ;kBACpD;;;;;;AAGP;GA5BgB;KAAA;AA8BT,SAAS;;IACd,OAAO,IAAA,iRAAU,EAAC;AACpB;IAFgB"}}]
}